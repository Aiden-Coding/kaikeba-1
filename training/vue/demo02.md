### Vue组件data选项为什么必须是个函数而Vue的根实例则没有此限制？

` Author rise created on 2020/1/21 `

> a 
- 假设將vue组件data选项作为一个对象，其次注册一个组件本质上是创建了一个组件构造器的引用，而真正使用组件的时候才会去將组件实例化，当复用多次组件时，多个组件的vue实例访问的data其实是栈内存中同一个引用，所以一个组件改变了data中的状态，其他组件的数据也随之变化。
- 假设將vue组件data选项作为一个函数，而返回实例所需要的数据data，则由于函数作用域， 则每份数据都是独立的。
- vue根实例注册只有一次，所以不存在上述情况。

> b
- 组件是复用的,使用`new Vue()`创建实例的过程中调用的是同一个工厂函数;他们的通过引用地址去访问值的,调用同一个方法引用的是同一个地址,所以如果某一个组件修改了其中的值,那么其他组件也会同时被影响;通常实例化多个组件,他们之间的`data`是不希望相互影响的,所以用到函数的独立作用域这一特性来解决这个问题; 通过`data`方法的`return`得到一个声明在函数内部的对象的引用地址交给组件实例去进行操作
- 根实例一般只会创建一个,也就巧妙地规避了这个问题

> c
 
- vue组件中data值不能为对象，因为对象是引用类型，组件可能会被多个实例同时引用。如果data值为对象，将导致多个实例共享一个对象，其中一个组件改变data属性值，其它实例也会受到影响。
- 上面解释了data不能为对象的原因，这里我们简单说下data为函数的原因。data为函数，通过return 返回对象的拷贝，致使每个实例都有自己独立的对象，实例之间可以互不影响的改变data属性值。

